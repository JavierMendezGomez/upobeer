<!DOCTYPE html>
<html>
<head>
	<title>UpoBeer - Inicio</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link type="text/css" rel="stylesheet" href="css/style.css">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<!-- Fuentes -->
	<link href="https://fonts.googleapis.com/css?family=Galada|Lobster|Pacifico|Playball&display=swap" rel="stylesheet">
</head>
<body>


<!--COPIADO Y PEGADO DE upobeer, REVISAR BIEN TODO-->

<div class="container-fluid" id="upobeer_main">
			
	<center>

<!--Cabecera inicio con logo grande-->
		<div class="cabeceraInicio elemento" id="cabeceraInicio">
				<header>
					<a id="logoInicio" href=""><img src="Img/logo2.png" class="logo"></a>
					<div class="titulos">
					<div class="titulo d-none d-lg-block">UpoBeer</div>
						<div class="subtitulo d-none d-sm-block">Fábrica de cerveza premium</div>
					</div>
				</header>
		</div>


<!--Formulario inicio sesion-->
		<div id="inicio" class="row section elemento">
			<div class="col-12" style="background: url(Img/Fondo3.jpg); background-size: contain; background-repeat: no-repeat; background-position: right; margin-right: 0.2rem;">
				<b>Introduzca sus datos para iniciar sesión en nuestro sistema</b><br><br>
				<table cellpadding="10">
				<form name="formularioInicio">
					<tr><td>
				        <label>Introduzca su usuario:	</label>
				    </td><td>
				        <input name="usuario" type="text" value="">
				    </td></tr>
				    <tr><td>
				        <label>Introduzca su contraseña: </label>
				    </td><td>
				        <input name="clave" type="password" value="">
				    </td></tr>
				    <tr><td colspan="2" style="text-align: center">
				        <input name="botonComprobar" type="button" value="Entrar" onclick="comprobarUsuario();"><br>
					</td></tr>
			    </form>
				</table><br>
			    <a id="enlaceRegistro" href="#">¿No tienes cuenta? Regístrate</a>
			</div>
		</div>


<!--Formulario registro nuevo cliente-->
		<div id="registro" class="row section elemento" style="width: 90vw">
			<div class="col-12" style="background: url(Img/Fondo3.jpg); background-size: contain; background-repeat: no-repeat; background-position: right; margin-right: 0.2rem;">
				<b>Introduzca sus datos para registrarse en nuestro sistema como cliente</b><br><br>
				<table cellpadding="12">
					<tbody>
						<form name="formularioRegistro">
						<tr>
							<td>
								<label>Usuario:	</label>
							</td><td>
								<input name="usuario" type="text" value="">
							</td>
							<td>
								<label>DNI:	<em>(clave)</em></label>
							</td><td>
								<input name="dni" type="text" value="">
							</td>
						</tr>
						<tr>
							<td>
								<label>Nombre:	</label>
							</td><td>
								<input name="nombre" type="text" value="">
							</td>
							<td>
								<label>Apellidos:	</label>
							</td><td>
								<input name="apellidos" type="text" value="">
							</td>
						</tr>
						<tr>
							<td>
								<label>Fecha de nacimiento:	</label>
							</td><td>
								<input name="fecha" type="date" value="">
							</td>
							<td>
								<label>Dirección:	</label>
							</td><td>
								<input name="direccion" type="text" value="">
							</td>
						</tr>
						<tr>
							<td>
								<label>Teléfono:	</label>
							</td><td>
								<input name="telefono" type="text" value="">
							</td>
							<td colspan="2" style="text-align: center">
								<input name="botonRegistrar" type="button" value="Registrarse" onclick="comprobarRegistro();">
							</td>
						</tr>
						</form>
					</tbody>
				</table>
			</div>
		</div>

<!----------------------- Entramos a la pagina con un tipo de usuario cliente ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
	</center>
	<div id="cliente" class="elemento">
<!--Cabecera principal mas pequeña modo navbar-->
		<div class="cabecera" id="cabecera">
			<header>
				<a href=""><img src="Img/logo2.png" class="logo"></a>
				<div class="titulos">
				<div class="titulo">UpoBeer</div>
					<div class="subtitulo">Fábrica de cerveza premium</div>
				</div>
			</header>
		</div>
		<center>
		<br>
		<h6 id="datosSesion"><b>Bienvenido, has iniciado sesión como: </b></h6>
		<div id="upobeer_btnsShow" class="row section">
			<div class="col-md-7" id="upobeer_btnsShowFrms">					
				<legend>Formularios</legend>			
				<div class="btn-group" role="group" aria-label="FomrBtns">
					<button type="button" class="btn-dark btn-sm" onclick="show_frmAltaPedido();">Alta Pedido</button>
					<button type="button" class="btn-dark btn-sm" onclick="show_frmBajaPedido();">Baja Pedido</button>
					<button type="button" class="btn-dark btn-sm" onclick="show_frmModificarPerfil();">Modificar mi perfil</button>
				</div>
			</div>
			<div class="col-md-5" id="upobeer_btnsShowLists"	>
				<legend>Listados</legend>
				<button type="button" class="btn-dark btn-sm" onclick="show_lstCatalogo()">Catálogo</button>
				<button type="button" class="btn-dark btn-sm" onclick="show_lstPedidosRegistrados()">Pedidos registrados</button>
			</div>
		</div>
		</center>
	</div>
		
	<!-- Importación de scripts, por orden -->
	<!-- Funciones que pueden usarse en todas las clases -->
	<script src="js/classes/funciones.js"></script>
	<!-- Clases ordenadas por sus dependencias -->
	<script src="js/classes/Cerveza.js"></script>
	<script src="js/classes/Vehiculo.js"></script>
	<script src="js/classes/Envio.js"></script>
	<script src="js/classes/LineaPedido.js"></script>
	<script src="js/classes/Pedido.js"></script>
	<script src="js/classes/Persona.js"></script>
	<script src="js/classes/Cliente.js"></script>
	<script src="js/classes/Operario.js"></script>
	<script src="js/classes/Conductor.js"></script>
	<script src="js/classes/UpoBeer.js"></script>
	<script>


		//INICIALIZAR MODELO
		var modelo = new UpoBeer();
		var tipo = "ninguno";
		var usuario = "";
		var clave = "";
		document.getElementById("enlaceRegistro").addEventListener("click", showRegistro);
		document.getElementById("logoInicio").addEventListener("click", showInicio);
		revisarSwitch();

		function revisarSwitch()
		{
			switch (tipo) {
			  case 'ninguno':
			  	ocultarTodo();
			  	document.querySelector("#cabeceraInicio").style.display = "inline";
				document.querySelector("#inicio").style.display = "inline";
				document.getElementById("registro").style.display = "none";
				console.log("se muestra ninguno");
			    break;
			  case 'cliente':
			  	ocultarTodo();
			  	let datos = document.createElement("text");
			  	datos.textContent = usuario + ", " + clave;
			  	document.querySelector("#datosSesion").appendChild(datos);
			    document.getElementById("cliente").style.display = "inline";
			    console.log("se muestra cliente");
			    break;
			  case 'operario':
			    console.log('El kilogramo de Bananas cuesta $0.48.');
			    break;
			  case 'supervisor':
			    console.log('El kilogramo de Cerezas cuesta $3.00.');
			    break;
			}
		}

		function ocultarTodo()
		{
			document.querySelectorAll(".elemento").forEach(function(element){element.style.display="none"});	
		}
		

		function showRegistro(){ 
			setTimeout(function(){document.getElementById("registro").style.display = "inline";}, 1000);
			setTimeout(function(){document.getElementById("inicio").style.display = "none";}, 1000);
		}

		function showInicio(){ 
			setTimeout(function(){document.getElementById("registro").style.display = "none";}, 1000);
			setTimeout(function(){document.getElementById("inicio").style.display = "inline";}, 1000);
		}

		//Datos de ejemplo
		modelo.altaCliente(new Cliente("user1","11111111A","Cliente1","Ap","1997-08-12","C/Mesina","111111111"));
		modelo.altaCliente(new Cliente("user2","11111111B","Cliente2","Ap","1993-04-16","C/Mesina","111111111"));
		modelo.altaCliente(new Cliente("user3","11111111C","Cliente2","Ap","1994-09-22","C/Mesina","111111111"));
		modelo.altaOperario(new Cliente("user4","11111111D","Operario1","Ap","1997-08-12","C/Mesina","111111111",true));
		modelo.altaOperario(new Cliente("user5","11111111E","Operario2","Ap","1997-08-12","C/Mesina","111111111",false));


		function comprobarUsuario(){

			usuario = formularioInicio.usuario.value;
			clave = formularioInicio.clave.value;
			console.log(usuario + ", " + clave);
			tipo = this.modelo.comprobarUsuario(usuario,clave);
			alert("Usuario tipo: " + tipo);
			if(tipo != "ninguno")
				revisarSwitch();
			else
				alert("Usuario incorrecto");
		}

		function comprobarRegistro(){

			var usuarioNuevo = formularioRegistro.usuario.value;
			var dni = formularioRegistro.dni.value;
			var nombre = formularioRegistro.nombre.value;
			var apellidos = formularioRegistro.apellidos.value;
			var fecha = formularioRegistro.fecha.value;
			var direccion = formularioRegistro.direccion.value;
			var telefono = formularioRegistro.telefono.value;
			if(usuarioNuevo==""||dni==""||nombre==""||apellidos==""||fecha==""||direccion==""||telefono=="")
				alert("Debe rellenar todos los campos");
			else if(this.modelo.comprobarRegistro(usuarioNuevo,dni,nombre,apellidos,fecha,direccion,telefono))
			{
				alert("Registrado ok");
				revisarSwitch();
			}
			else
				alert("Error, ya existe ese dni");

		}

	</script>

</body>
</html>
